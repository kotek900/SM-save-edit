<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <div id="top_bar">
            <div id="file_controls">
                <input type="file" id="open_file_button" accept=".db"></input>
            </div>
            <div role="tablist">
                <button role="tab" aria-selected="true" aria-controls="game_info_view" id="game_info_tab">Game Info</button>
                <button role="tab" aria-selected="false" aria-controls="main_view" id="main_view_tab">3D view</button>
                <button role="tab" aria-selected="false" aria-controls="object_list_view" id="object_list_tab">Object list</button>
                <button role="tab" aria-selected="false" aria-controls="about_view" id="about_view_tab">About</button>
            </div>
            <a download="world.db" id="save_file_link"><button id="save_file_button">save</button></a>
        </div>
        <div id="game_info_view" role="tabpanel">
            <div id="GameInfo_menu">
                <div class="input_box">
                    <table>
                        <tr>
                            <th>Seed:</th><th><input id="input_seed" type="number"></th>
                        </tr>
                        <tr>
                            <th>Tick:</th><th><input id="input_tick" type="number"></th>
                        </tr>
                        <tr>
                            <th>Version:</th><th><input id="input_version" type="number"></th>
                        </tr>
                    </table>
                </div>
                <div class="input_box">
                    Mods: <span id="info_mods"></span>
                    <table id="table_mods">
                        <tr>
                            <td>fileId</td><td>localId</td><td></td>
                        </tr>
                        <tr>
                            <td><input id="input_mod_fileId" type="number" size="10"></input></td><td><input id="input_mod_localId" size="36" maxlength="36"></input></td><td><button id="button_add_mod">add</button></td>
                        </tr>
                    </table>
                    <button id="button_mod_list_copy" class="table_controlls">Copy mod list</button><button id="button_mod_list_paste" class="table_controlls">Paste mod list</button><button id="button_mod_list_clear" class="table_controlls">Clear mod list</button>
                </div>
            </div>
        </div>
        <div id="main_view" role="tabpanel" hidden>
            <div id="tool_menu">
                <div class="input_box" id="info_selected_text">Selected: <span id="info_selected">none</span></div>
                <div class="input_box" id="input_box_buttons">
                    <button id="button_select_body">Select rigid body</button>
                    <button id="button_create_block">Create block</button>
                    <button id="button_delete">delete object</button>
                </div>
                <div id="ChildShape_menu">
                    <div class="input_box">UUID: <input type="text" id="selected_UUID" size="36" maxlength="36"></input></div>
                    <div class="input_box">Color: <input type="color" id="selected_color_picker"></input></div>
                    <div class="input_box">
                        Local position:
                        <br> x: <input type="number" id="input_position_z"></input>
                        <br> y: <input type="number" id="input_position_y"></input>
                        <br> z: <input type="number" id="input_position_x"></input>
                    </div>
                    <div class="input_box" id="input_size">
                        Size:
                        <br> x: <input type="number" id="input_size_x" min="1" max="255"></input>
                        <br> y: <input type="number" id="input_size_y" min="1" max="255"></input>
                        <br> z: <input type="number" id="input_size_z" min="1" max="255"></input>
                    </div>
                </div>
                <div id="RigidBody_menu">
                    <div class="input_box">
                        Position:
                        <br>x: <input type="number" id="input_position_x_float"></input>
                        <br>y: <input type="number" id="input_position_y_float"></input>
                        <br>z: <input type="number" id="input_position_z_float"></input>
                    </div>
                    <div class="input_box">
                        Rotation:
                        <br>x: <input type="number" id="input_rotation_x_float"></input>
                        <br>y: <input type="number" id="input_rotation_y_float"></input>
                        <br>z: <input type="number" id="input_rotation_z_float"></input>
                    </div>
                </div>
            </div>
        </div>
        <div id="object_list_view" role="tabpanel" class="generic_tab" hidden>
            <div id="object_list">
            </div>
        </div>
        <div id="about_view" role="tabpanel" class="generic_tab" hidden>
            <div>
                <h1>About</h1>
                <h2>Working on files</h2>
                <p>Open a Scrap Mechanic save file (.db) with the button on the top left.</p>
                <p>To save the file, click the "save" button on the right to download it.</p>
                <h2>Game Info</h2>
                <p>The Game Info tab contains information about the save file.</p>
                <p>You can change the seed, tick and the version of the save file.</p>
                <p>Changing the version of the save file only changes the metadata, changing the save version value is <mark>not</mark> recommended.</p>
                <h2>3D view</h2>
                <p>In the 3D view tab you can see the Scrap Mechanic world in a 3D environment.</p>
                <p>Rotate the camera with left click and move it around with right click.</p>
                <p>Select objects with left click without dragging the mouse.</p>
                <p>On the right you can see the propeties of the selected object, you can change the color, position, UUID and size of blocks. It's also possible to select the rigid body of blocks and delete objects. To create new blocks you need to select the rigid body and then click the create block button.</p>
            </div>
            <div>
                <h2>Links:</h2>
                <a href="https://github.com/kotek900/Scrap-Mechanic-Save-Editor">GitHub</a>
            </div>
        </div>
        <script src="scripts/tabs.js"></script>
        <script type="importmap">
            {
                "imports": {
                    "three": "https://unpkg.com/three@0.157.0/build/three.module.js",
                    "three/addons/": "https://unpkg.com/three@0.157.0/examples/jsm/",

                    "child_shape": "./scripts/child_shape.js",
                    "editor": "./scripts/editor.js",
                    "game_info": "./scripts/game_info.js",
                    "resource_manager": "./scripts/resource_manager.js",
                    "rigid_body": "./scripts/rigid_body.js",
                    "utils": "./scripts/utils.js"
                }
            }
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.10.3/sql-wasm.js"></script>
        <script src="scripts/main.js" type="module"></script>
    </body>
</html>
